# frozen_string_literal: true

module Bsl
  module Utils
    def crc16(data)
      raise ArgumentError, 'data mus be an Array' unless data.is_a?(Array)

      crc = 0xFFFF

      data.each do |byte|
        x = (crc >> 8 ^ byte) & 0xFF
        x ^= x >> 4
        crc = (crc << 8) ^ (x << 12) ^ (x << 5) ^ x
      end

      crc & 0xFFFF
    end
  end
end
